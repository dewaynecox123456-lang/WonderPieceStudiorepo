<!doctype html><meta charset="utf-8"><title>Gallery</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<div class="wrap" style="padding:28px 16px">
  <h1 style="font-weight:900">Gallery</h1>
  <div id="grid" class="grid" style="margin-top:12px"><div class="card"><div class="imgwrap"></div><div class="title">Loading…</div></div></div>
  <section id="showcaseCard" class="card" style="margin-top:16px;display:none">
    <h3 id="showTitle" style="margin:0 0 6px">Showcase Your Work</h3>
    <p id="showDesc" style="color:var(--muted)">Submit your art to be featured.</p>
    <button class="btn btn-primary btn-puzzle" id="openShowcase">Submit — <span id="feeText">$15</span></button>
    <form id="showcaseForm" name="showcase" method="POST" data-netlify="true" style="display:none;margin-top:12px">
      <input type="hidden" name="form-name" value="showcase">
      <input type="hidden" name="ticketId" id="ticketId">
      <p><label>Your Name<br><input type="text" name="name" required></label></p>
      <p><label>Your Email<br><input type="email" name="email" required></label></p>
      <p><label>Portfolio / Link to work<br><input type="url" name="portfolio" placeholder="https://..."></label></p>
      <p><label>Notes<br><textarea name="notes" rows="4" placeholder="Tell us about your submission"></textarea></label></p>
      <div style="display:flex;gap:8px;align-items:center">
        <a id="payPaypal" class="btn btn-primary btn-puzzle" href="#" target="_blank" rel="noopener" style="display:none">Pay via PayPal</a>
        <a id="payCash" class="btn btn-ghost" href="#" target="_blank" rel="noopener" style="display:none">Pay via Cash App</a>
      </div>
      <p style="color:var(--muted);margin-top:8px">A ticket number will be generated and included in your email receipt.</p>
    </form>
  </section>
  <p style="color:var(--muted);margin-top:14px"><a href="/">← Back</a></p>
</div>
<script>
function ticketId(prefix){const d=new Date();const ymd=d.toISOString().slice(0,10).replace(/-/g,'');const r=Math.floor(1000+Math.random()*9000);return `${prefix||'WPS'}-${ymd}-${r}`;}
fetch('gallery.json').then(r=>r.json()).then(d=>{const g=document.getElementById('grid');g.innerHTML='';(d.images||[]).forEach(it=>{const card=document.createElement('div');card.className='card';card.innerHTML=`<div class='imgwrap'><img src='${it.img}' alt='${it.title||""}'/></div><div class='title'>${it.title||""}</div>`;g.appendChild(card);});}).catch(_=>{document.getElementById('grid').innerHTML='<div class=card>No images yet. Use Admin to add.</div>';});
fetch('config.json').then(r=>r.json()).then(cfg=>{
  const sc = cfg.showcase||{};
  if(!sc.enabled){ return; }
  document.getElementById('showcaseCard').style.display='block';
  document.getElementById('showTitle').textContent = sc.title || 'Showcase Your Work';
  document.getElementById('showDesc').textContent = sc.description || 'Submit your art to be featured.';
  document.getElementById('feeText').textContent = new Intl.NumberFormat('en-US',{style:'currency',currency:sc.currency||'USD'}).format(sc.fee||15);
  const btn = document.getElementById('openShowcase'); const form = document.getElementById('showcaseForm');
  const payPal = document.getElementById('payPaypal'); const payCash = document.getElementById('payCash');
  btn.addEventListener('click', ()=>{
    const id = ticketId(cfg.ticketPrefix||'WPS'); document.getElementById('ticketId').value = id; form.style.display='block';
    if(sc.providers && sc.providers.paypalMe && sc.providers.paypalMe.enabled){
      const base = sc.providers.paypalMe.link || ''; const url = const url = base.endsWith('/')? base + (sc.fee||15) : base + '/' + (sc.fee||15);
      // The above line is pythonic by mistake; fix below in JS:
    });
});
</script>
